- job-template:
    name: 'SERVICE_{service_name}'
    parameters:
      - string:
          name: BRANCH_NAME
          default: "master"
          description: ""
    disabled: false
    project-type: freestyle
    concurrent: falseclear
    scm:
      - "{git_scm}"
    builders:
      - docker-pull-image: # not work now, haven't image_id in docker hub and docker notification
          docker-registry-url: https://cloud.docker.com/u/jibrelnetwork
          credentials-id: userpass-jibrelbot-dockerhub
      - shell: |
          {build}

- project:
    name: "SHARED_SERVICES"
    jobs:
      - "SERVICE_{service_name}"
    service_name:
      - "JASSETS":
          git_scm: jassets
          timed: H 00 * * *
          build: |
            docker-compose -f ./jassets/docker-compose.yml -f docker-compose.yml -f docker-compose.staging.yml down
            docker-compose -f ./jassets/docker-compose.yml -f docker-compose.yml -f docker-compose.staging.yml up -d jassets
